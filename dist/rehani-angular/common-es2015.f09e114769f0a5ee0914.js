(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{JuEE:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("U7T7"),n=i("fXoL");let r=(()=>{class t{transform(t,...e){return o.a[t].label||"Unkown Role"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Pb({name:"role",type:t,pure:!0}),t})()},TqWN:function(t,e,i){"use strict";var o=i("mrSG"),n=i("+0xr"),r=i("M9IT"),c=i("LvDl"),a=i("0IaG"),s=i("3Pt+"),l=i("U7T7"),u=i("fXoL"),b=i("H+bZ"),d=i("N/25"),m=i("Wp6s"),f=i("kmnG"),p=i("qFsG"),h=i("ofXK"),g=i("d3UM"),C=i("bTqV"),v=i("FKr1");function V(t,e){1&t&&(u.Wb(0,"p"),u.Wb(1,"mat-form-field"),u.Rb(2,"input",11),u.Vb(),u.Vb())}function W(t,e){if(1&t&&(u.Wb(0,"mat-option",12),u.Kc(1),u.Vb()),2&t){const t=e.$implicit,i=u.mc();u.rc("value",t),u.Cb(1),u.Mc(" ",i.displayRoles[t].label," ")}}function w(t,e){if(1&t&&(u.Wb(0,"p",13),u.Kc(1),u.Vb()),2&t){const t=u.mc();u.Cb(1),u.Mc(" ",t.error," ")}}let y=(()=>{class t{constructor(t,e,i,o,n){this.fb=t,this.api=e,this.authService=i,this.dialogRef=o,this.data=n,this.isCreateMode=!0,console.log(n.classList)}onNoClick(){this.dialogRef.close()}ngOnInit(){this.initialValues=this.data.user,this.isCreateMode=""===this.initialValues._id;const t=this.authService.getLogginedUserRole();this.displayRoles="SUPER_ADMIN"===t?Object(c.pick)(l.a,["ADMIN"]):Object(c.pick)(l.a,Object(c.filter)(Reflect.ownKeys(l.a),t=>!("ADMIN"===t||"SUPER_ADMIN"===t))),this.keys=Reflect.ownKeys(this.displayRoles),this.form=this.fb.group({_id:[this.initialValues._id],name:[this.initialValues.name,s.r.required],role:[this.initialValues.role||Reflect.ownKeys(this.displayRoles)[0],s.r.required],username:[this.initialValues.username,s.r.required],password:[this.initialValues.password,s.r.required]})}submit(){return Object(o.a)(this,void 0,void 0,(function*(){if(this.form.valid){const t=this.form.value;let e;const{_id:i,password:n}=t,r=Object(o.b)(t,["_id","password"]);if(""==t._id)e=yield this.api.post(this.data.resourceUrl,Object.assign(Object.assign({},r),{password:n})).toPromise();else{const o=`${this.data.resourceUrl}/${i}`;e=yield this.api.put(o,t).toPromise()}this.dialogRef.close(e)}}))}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.d),u.Qb(b.a),u.Qb(d.a),u.Qb(a.e),u.Qb(a.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-create-user-form"]],inputs:{error:"error"},decls:25,vars:8,consts:[["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Name","formControlName","name"],["type","text","matInput","","placeholder","User Name","formControlName","username"],[4,"ngIf"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"button"],["type","button","mat-button","",3,"disabled","click"],["type","submit","mat-button","",3,"disabled"],["type","password","matInput","","placeholder","Password","formControlName","password"],[3,"value"],[1,"error"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"mat-card"),u.Wb(2,"mat-card-title"),u.Kc(3),u.Vb(),u.Wb(4,"mat-card-content"),u.Wb(5,"form",1),u.ic("ngSubmit",(function(){return e.submit()})),u.Wb(6,"p"),u.Wb(7,"mat-form-field"),u.Rb(8,"input",2),u.Vb(),u.Vb(),u.Wb(9,"p"),u.Wb(10,"mat-form-field"),u.Rb(11,"input",3),u.Vb(),u.Vb(),u.Ic(12,V,3,0,"p",4),u.Wb(13,"p"),u.Wb(14,"mat-form-field"),u.Wb(15,"mat-label"),u.Kc(16,"Role"),u.Vb(),u.Wb(17,"mat-select",5),u.Ic(18,W,2,2,"mat-option",6),u.Vb(),u.Vb(),u.Vb(),u.Ic(19,w,2,1,"p",7),u.Wb(20,"div",8),u.Wb(21,"button",9),u.ic("click",(function(){return e.form.reset(e.initialValues)})),u.Kc(22,"Reset"),u.Vb(),u.Wb(23,"button",10),u.Kc(24),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Cb(3),u.Lc(e.isCreateMode?"Create User":"Update User"),u.Cb(2),u.rc("formGroup",e.form),u.Cb(7),u.rc("ngIf",e.isCreateMode),u.Cb(6),u.rc("ngForOf",e.keys),u.Cb(1),u.rc("ngIf",e.error),u.Cb(2),u.rc("disabled",!e.form.touched),u.Cb(2),u.rc("disabled",e.form.invalid),u.Cb(1),u.Lc(""==e.form.value._id?"Create":"Update"))},directives:[a.c,m.a,m.d,m.b,s.t,s.l,s.f,f.b,p.a,s.c,s.k,s.e,h.m,f.e,g.a,h.l,C.a,v.h],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.forgot-pass-link[_ngcontent-%COMP%]{align-self:center;padding:0 16px;text-decoration:underline;font-size:smaller;font-style:italic;line-height:36px}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:unset}"]}),t})();var I=i("edFq"),R=i("NFeN"),M=i("JuEE");function U(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Name "),u.Vb())}function K(t,e){if(1&t&&(u.Wb(0,"td",17),u.Kc(1),u.Vb()),2&t){const t=e.$implicit;u.Cb(1),u.Mc(" ",t.name," ")}}function O(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Username "),u.Vb())}function k(t,e){if(1&t&&(u.Wb(0,"td",17),u.Kc(1),u.Vb()),2&t){const t=e.$implicit;u.Cb(1),u.Mc(" ",t.username," ")}}function L(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Role "),u.Vb())}function D(t,e){if(1&t&&(u.Wb(0,"td",17),u.Kc(1),u.nc(2,"role"),u.Vb()),2&t){const t=e.$implicit;u.Cb(1),u.Mc(" ",u.oc(2,1,t.role)," ")}}function N(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Created on "),u.Vb())}function S(t,e){if(1&t&&(u.Wb(0,"td",17),u.Kc(1),u.nc(2,"date"),u.Vb()),2&t){const t=e.$implicit;u.Cb(1),u.Mc(" ",u.oc(2,1,t.createdAt)," ")}}function A(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Update on "),u.Vb())}function _(t,e){if(1&t&&(u.Wb(0,"td",17),u.Kc(1),u.nc(2,"date"),u.Vb()),2&t){const t=e.$implicit;u.Cb(1),u.Mc(" ",u.oc(2,1,t.updatedAt)," ")}}function x(t,e){1&t&&(u.Wb(0,"th",16),u.Kc(1," Actions "),u.Vb())}function P(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",17),u.Wb(1,"div",18),u.Wb(2,"button",19),u.ic("click",(function(){u.Bc(t);const i=e.$implicit;return u.mc().onEdit(i)})),u.Wb(3,"mat-icon"),u.Kc(4,"create"),u.Vb(),u.Vb(),u.Wb(5,"button",20),u.ic("click",(function(){u.Bc(t);const i=e.$implicit;return u.mc().onDelete(i)})),u.Wb(6,"mat-icon"),u.Kc(7,"delete"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}}function F(t,e){1&t&&u.Rb(0,"tr",21)}function j(t,e){1&t&&u.Rb(0,"tr",22)}i.d(e,"a",(function(){return $}));const E=function(){return[5,10,20]};let $=(()=>{class t{constructor(t,e,i){this.resourceService=t,this.authService=e,this.dialog=i,this.resourceUrl="/users"}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.resourceService.fetchAll(this.resourceUrl).toPromise();this.displayedColumns=["name","userName","role","createdAt","updatedAt","action"],this.resetList(t.data)}))}reFetchResourceList(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.resourceService.fetchAll(this.resourceUrl).toPromise();this.resetList(t.data)}))}resetList(t){const e=this.filterBasedOnRole(t);this.dataSource=new n.k(e),this.dataSource.paginator=this.paginator}filterBasedOnRole(t){const e="SUPER_ADMIN"===this.authService.getLogginedUserRole()?{role:"ADMIN"}:t=>!("ADMIN"==t.role||"SUPER_ADMIN"==t.role);return Object(c.filter)(t,e)}getClassName(t){return console.log(this.classMap[t]),this.classMap.get(t)||"Class has been deleted"}openDialogue(t){this.dialog.open(y,{width:"600px",data:{resourceUrl:this.resourceUrl,classList:this.classList,user:t}}).afterClosed().subscribe(t=>{this.reFetchResourceList()})}onAddResource(){this.openDialogue({_id:"",name:"",mobileNumber:"",class:"",isSubscribed:""})}onUpdate(){this.reFetchResourceList()}onDelete(t){return Object(o.a)(this,void 0,void 0,(function*(){yield this.resourceService.delete(this.resourceUrl,t).toPromise(),this.reFetchResourceList()}))}onEdit(t){return Object(o.a)(this,void 0,void 0,(function*(){this.openDialogue(t)}))}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(I.a),u.Qb(d.a),u.Qb(a.b))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-users-page"]],viewQuery:function(t,e){var i;1&t&&u.Gc(r.a,!0),2&t&&u.yc(i=u.jc())&&(e.paginator=i.first)},inputs:{resourceUrl:"resourceUrl"},decls:29,vars:5,consts:[[1,"mat-elevation-z8"],[1,"resource-actions-panel"],[1,"table-heading"],["mat-icon-button","","color","warn","mat-mini-fab","","aria-label","Example icon button with a home icon",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","role"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","action","sticky","true"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"example-flex-container2"],["mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon",3,"click"],["mat-icon-button","","color","warn","aria-label","Example icon button with a home icon",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"h3",2),u.Kc(3," Users "),u.Vb(),u.Wb(4,"button",3),u.ic("click",(function(){return e.onAddResource()})),u.Wb(5,"mat-icon"),u.Kc(6,"add"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"table",4),u.Ub(8,5),u.Ic(9,U,2,0,"th",6),u.Ic(10,K,2,1,"td",7),u.Tb(),u.Ub(11,8),u.Ic(12,O,2,0,"th",6),u.Ic(13,k,2,1,"td",7),u.Tb(),u.Ub(14,9),u.Ic(15,L,2,0,"th",6),u.Ic(16,D,3,3,"td",7),u.Tb(),u.Ub(17,10),u.Ic(18,N,2,0,"th",6),u.Ic(19,S,3,3,"td",7),u.Tb(),u.Ub(20,11),u.Ic(21,A,2,0,"th",6),u.Ic(22,_,3,3,"td",7),u.Tb(),u.Ub(23,12),u.Ic(24,x,2,0,"th",6),u.Ic(25,P,8,0,"td",7),u.Tb(),u.Ic(26,F,1,0,"tr",13),u.Ic(27,j,1,0,"tr",14),u.Vb(),u.Rb(28,"mat-paginator",15),u.Vb()),2&t&&(u.Cb(7),u.rc("dataSource",e.dataSource),u.Cb(19),u.rc("matHeaderRowDef",e.displayedColumns),u.Cb(1),u.rc("matRowDefColumns",e.displayedColumns),u.Cb(1),u.rc("pageSizeOptions",u.uc(4,E)))},directives:[C.a,R.a,n.j,n.c,n.e,n.b,n.g,n.i,r.a,n.d,n.a,n.f,n.h],pipes:[M.a,h.e],styles:["table[_ngcontent-%COMP%]{width:100%}.resource-actions-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 20px}"]}),t})()},edFq:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("fXoL"),n=i("H+bZ");let r=(()=>{class t{constructor(t){this.api=t}fetchAll(t){return this.api.get(t)}delete(t,e){return this.api.delete(`${t}/${e._id}`)}}return t.\u0275fac=function(e){return new(e||t)(o.ec(n.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vQ30:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var o=i("fXoL"),n=i("MutI"),r=i("ofXK"),c=i("tyNb"),a=i("NFeN");function s(t,e){if(1&t&&(o.Wb(0,"a",1),o.Wb(1,"mat-icon",2),o.Kc(2),o.Vb(),o.Kc(3),o.Vb()),2&t){const t=e.$implicit;o.rc("routerLink",t.link),o.Cb(2),o.Lc(t.icon),o.Cb(1),o.Mc(" ",t.title," ")}}let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-side-menu"]],inputs:{menuList:"menuList"},decls:2,vars:1,consts:[["mat-list-item","","class","menu-item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","","routerLinkActive","active",1,"menu-item",3,"routerLink"],["aria-hidden","false","aria-label","Example thumbs up SVG icon"]],template:function(t,e){1&t&&(o.Wb(0,"mat-nav-list"),o.Ic(1,s,4,3,"a",0),o.Vb()),2&t&&(o.Cb(1),o.rc("ngForOf",e.menuList))},directives:[n.c,r.l,n.a,c.d,c.c,a.a],styles:[".menu-item[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}a.active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.08);color:rgba(0,0,0,.7)}"]}),t})()}}]);