function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3LUQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("PSD3"),r=n.n(i),c=n("fXoL"),o=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"success",value:function(e){r.a.fire(e,"","success")}},{key:"error",value:function(e){r.a.fire(e,"","error")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Bwgp:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i=n("mrSG"),r=n("U7T7"),c=n("LvDl"),o=n("1kSV"),a=n("3Pt+"),s=n("PSD3"),u=n.n(s),l=n("fXoL"),b=n("st1q"),f=n("tyNb"),d=n("ofXK"),m=n("Wp6s"),p=n("bTqV"),h=n("NFeN");function v(e,t){if(1&e&&(l.Wb(0,"option",14),l.Kc(1),l.Vb()),2&e){var n=t.$implicit;l.rc("value",n),l.Cb(1),l.Mc(" ",n," ")}}function g(e,t){if(1&e){var n=l.Xb();l.Wb(0,"div"),l.Wb(1,"label"),l.Kc(2," Option: "),l.Rb(3,"input",15),l.Wb(4,"button",16),l.ic("click",(function(){l.Bc(n);var e=t.index;return l.mc(2).removeOption(e)})),l.Kc(5,"Remove"),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=t.index;l.Cb(3),l.rc("formControlName",i)}}function C(e,t){if(1&e){var n=l.Xb();l.Wb(0,"div",2),l.Wb(1,"form",3),l.Wb(2,"mat-card",4),l.Wb(3,"select",5),l.Ic(4,v,2,2,"option",6),l.Vb(),l.Rb(5,"input",7),l.Wb(6,"div",8),l.Wb(7,"h3",9),l.Kc(8,"Options"),l.Wb(9,"button",10),l.ic("click",(function(){return l.Bc(n),l.mc().addOption()})),l.Wb(10,"mat-icon"),l.Kc(11,"add"),l.Vb(),l.Wb(12,"span"),l.Kc(13,"Add Options"),l.Vb(),l.Vb(),l.Vb(),l.Ic(14,g,6,1,"div",11),l.Vb(),l.Vb(),l.Wb(15,"button",12),l.ic("click",(function(){return l.Bc(n),l.mc().save()})),l.Kc(16,"Save"),l.Vb(),l.Wb(17,"button",13),l.ic("click",(function(){return l.Bc(n),l.mc().dismiss("Save click")})),l.Kc(18,"Cancel"),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=l.mc();l.Cb(1),l.rc("formGroup",i.questionForm),l.Cb(3),l.rc("ngForOf",i.questionKeys),l.Cb(10),l.rc("ngForOf",i.options.controls)}}function V(e,t){if(1&e&&(l.Wb(0,"div"),l.Wb(1,"b"),l.Kc(2),l.Vb(),l.Kc(3),l.Vb()),2&e){var n=l.mc(),i=n.index,r=n.$implicit;l.Cb(2),l.Mc("Question ",i+1,": "),l.Cb(1),l.Mc(" ",r.title,"")}}function y(e,t){if(1&e&&(l.Wb(0,"li"),l.Kc(1),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",n," ")}}function W(e,t){if(1&e){var n=l.Xb();l.Wb(0,"mat-card",30),l.Wb(1,"ol"),l.Ic(2,y,2,1,"li",11),l.Vb(),l.Wb(3,"div",31),l.Wb(4,"button",12),l.ic("click",(function(){l.Bc(n);var e=l.mc().$implicit;return l.mc(5).showAnswers(e)})),l.Kc(5,"View Answers"),l.Vb(),l.Wb(6,"button",13),l.ic("click",(function(){l.Bc(n);var e=l.mc().$implicit;return l.mc(5).deleteQuestion(e)})),l.Kc(7,"Delete"),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=l.mc().$implicit;l.Cb(2),l.rc("ngForOf",i.options)}}function k(e,t){1&e&&(l.Wb(0,"ngb-panel"),l.Ic(1,V,4,2,"ng-template",28),l.Ic(2,W,8,1,"ng-template",29),l.Vb())}function w(e,t){if(1&e&&(l.Wb(0,"ngb-accordion",26,27),l.Ic(2,k,3,0,"ngb-panel",11),l.Vb()),2&e){var n=l.mc(2).$implicit,i=l.mc(2);l.Cb(2),l.rc("ngForOf",i.catogoryWiseQuestions[n])}}function O(e,t){if(1&e){var n=l.Xb();l.Wb(0,"button",24),l.ic("click",(function(){l.Bc(n);var e=l.mc().$implicit;return l.mc(2).addNewQuestion(e)})),l.Wb(1,"mat-icon"),l.Kc(2,"add"),l.Vb(),l.Kc(3,"Add new question"),l.Vb(),l.Ic(4,w,3,1,"ngb-accordion",25)}if(2&e){var i=l.mc().$implicit,r=l.mc(2);l.Cb(4),l.rc("ngIf",r.catogoryWiseQuestions&&r.catogoryWiseQuestions[i])}}var K=function(e){return{"active-tab":e}};function I(e,t){if(1&e&&(l.Wb(0,"li",21),l.Wb(1,"a",22),l.Kc(2),l.Vb(),l.Ic(3,O,5,1,"ng-template",23),l.Vb()),2&e){var n=t.$implicit,i=t.index,r=l.mc(2);l.rc("ngbNavItem",i+1),l.Cb(1),l.rc("ngClass",l.vc(3,K,i+1===r.active)),l.Cb(1),l.Mc(" ",n," ")}}function x(e,t){if(1&e){var n=l.Xb();l.Ub(0),l.Wb(1,"ul",17,18),l.ic("activeIdChange",(function(e){return l.Bc(n),l.mc().active=e})),l.Ic(3,I,4,5,"li",19),l.Vb(),l.Rb(4,"div",20),l.Tb()}if(2&e){var i=l.zc(2),r=l.mc();l.Cb(1),l.rc("activeId",r.active),l.Cb(2),l.rc("ngForOf",r.questionKeys),l.Cb(1),l.rc("ngbNavOutlet",i)}}var R=function(){var e=function(){function e(t,n,i,c,o){_classCallCheck(this,e),this.suggestionsService=t,this.modalService=n,this.fb=i,this.router=c,this.activatedRoute=o,this.QUESTION_CATEGORY=r.b,this.active=1,this.closeResult="",this.createMode=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.questionKeys=Object(r.e)(r.b),console.log(this.questionKeys),this.getAllSchemes(),this.fetchQuestions(),this.questionForm=this.fb.group({title:["",a.v.required],description:[""],category:["",a.v.required],options:this.fb.array([])})}},{key:"getAllSchemes",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.suggestionsService.getAllScheme().toPromise();case 2:t=e.sent,this.schemes=t.data,this.questionKeys=this.schemes.map((function(e){return e.title})),console.log(this.schemes);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"fetchQuestions",value:function(){var e=this;this.suggestionsService.getAllQuestionsWithAnswers().subscribe((function(t){e.catogoryWiseQuestions=Object(c.groupBy)(t,"category")}))}},{key:"addOption",value:function(){this.options.push(this.fb.control(""))}},{key:"deleteQuestion",value:function(e){var t=this;this.suggestionsService.deleteQuestion(e).subscribe((function(e){t.fetchQuestions(),u.a.fire("","Response saved successgully!","success")}))}},{key:"dismiss",value:function(e){this.createMode=!1}},{key:"save",value:function(){var e=this,t=this.questionForm.value;""!==t.title?t.options.length<2?u.a.fire("","There should be atleast 2 options","error"):this.suggestionsService.createQuestion(t).subscribe((function(t){e.fetchQuestions(),u.a.fire("","Response saved successgully!","success"),e.createMode=!1})):u.a.fire("","Title field cant be blank","error")}},{key:"removeOption",value:function(e){this.options.removeAt(e)}},{key:"addNewQuestion",value:function(e){this.createMode=!0,this.questionForm.patchValue({category:e})}},{key:"getDismissReason",value:function(e){return e===o.a.ESC?"by pressing ESC":e===o.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"showAnswers",value:function(e){this.router.navigate([e._id,"answers"],{relativeTo:this.activatedRoute})}},{key:"options",get:function(){return this.questionForm.get("options")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(b.a),l.Qb(o.c),l.Qb(a.e),l.Qb(f.c),l.Qb(f.a))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-suggestion-questions"]],decls:2,vars:2,consts:[["class","col-lg-4 col-md-6 question-container",4,"ngIf"],[4,"ngIf"],[1,"col-lg-4","col-md-6","question-container"],[3,"formGroup"],[1,"mb10"],["formControlName","category","id","exampleFormControlSelect1",1,"medium-input","width-100"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","title","id","title","placeholder","Question Title",1,"medium-input","width-100"],["formArrayName","options",1,"mb10"],[1,"add-options"],["mat-raised-button","",3,"click"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",1,"ml10",3,"click"],[3,"value"],["type","text",3,"formControlName"],["mat-stroked-button","","color","warn",1,"ml10",3,"click"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink","",1,"tab-links",3,"ngClass"],["ngbNavContent",""],["mat-raised-button","",1,"mb10",3,"click"],["activeIds","ngb-panel-0",4,"ngIf"],["activeIds","ngb-panel-0"],["acc","ngbAccordion"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"max-w"],[1,"mb10","ml20"]],template:function(e,t){1&e&&(l.Ic(0,C,19,3,"div",0),l.Ic(1,x,5,3,"ng-container",1)),2&e&&(l.rc("ngIf",t.createMode),l.Cb(1),l.rc("ngIf",!t.createMode))},directives:[d.m,a.x,a.m,a.g,m.a,a.u,a.l,a.f,d.l,a.c,a.d,p.b,h.a,a.q,a.w,o.e,o.i,o.g,o.h,d.k,o.f,o.b,o.k,o.m,o.l],styles:["a[_ngcontent-%COMP%]{background-color:#217922}.card-body[_ngcontent-%COMP%]{border:2px solid #000}.active-tab[_ngcontent-%COMP%], .tab-links[_ngcontent-%COMP%]:focus, .tab-links[_ngcontent-%COMP%]:hover{color:#217922;border-color:#398439;border-bottom-width:0}.active-tab[_ngcontent-%COMP%]{background-color:#eee}.ml10[_ngcontent-%COMP%]{margin-left:10px}.mb10[_ngcontent-%COMP%]{margin-bottom:10px}.ml20[_ngcontent-%COMP%]{margin-left:20px}.add-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.max-w[_ngcontent-%COMP%]{max-width:700px}"]}),e}()},JuEE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("U7T7"),r=n("fXoL"),c=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return i.c[e].label||"Unkown Role"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Pb({name:"role",type:e,pure:!0}),e}()},TqWN:function(e,t,n){"use strict";var i=n("mrSG"),r=n("+0xr"),c=n("M9IT"),o=n("LvDl"),a=n("0IaG"),s=n("3Pt+"),u=n("U7T7"),l=n("fXoL"),b=n("H+bZ"),f=n("N/25"),d=n("Wp6s"),m=n("kmnG"),p=n("qFsG"),h=n("ofXK"),v=n("d3UM"),g=n("bTqV"),C=n("FKr1");function V(e,t){1&e&&(l.Wb(0,"p"),l.Wb(1,"mat-form-field"),l.Rb(2,"input",11),l.Vb(),l.Vb())}function y(e,t){if(1&e&&(l.Wb(0,"mat-option",12),l.Kc(1),l.Vb()),2&e){var n=t.$implicit,i=l.mc();l.rc("value",n),l.Cb(1),l.Mc(" ",i.displayRoles[n].label," ")}}function W(e,t){if(1&e&&(l.Wb(0,"p",13),l.Kc(1),l.Vb()),2&e){var n=l.mc();l.Cb(1),l.Mc(" ",n.error," ")}}var k,w,O=((k=function(){function e(t,n,i,r,c){_classCallCheck(this,e),this.fb=t,this.api=n,this.authService=i,this.dialogRef=r,this.data=c,this.isCreateMode=!0,console.log(c.classList)}return _createClass(e,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"ngOnInit",value:function(){this.initialValues=this.data.user,this.isCreateMode=""===this.initialValues._id;var e=this.authService.getLogginedUserRole();this.displayRoles="SUPER_ADMIN"===e?Object(o.pick)(u.c,["ADMIN"]):Object(o.pick)(u.c,Object(o.filter)(Reflect.ownKeys(u.c),(function(e){return!("ADMIN"===e||"SUPER_ADMIN"===e)}))),this.keys=Reflect.ownKeys(this.displayRoles),this.form=this.fb.group({_id:[this.initialValues._id],name:[this.initialValues.name,s.v.required],role:[this.initialValues.role||Reflect.ownKeys(this.displayRoles)[0],s.v.required],username:[this.initialValues.username,s.v.required],password:[this.initialValues.password,s.v.required]})}},{key:"submit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,c,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.form.valid){e.next=14;break}if(t=this.form.value,r=t._id,c=t.password,o=Object(i.b)(t,["_id","password"]),""!=t._id){e.next=9;break}return e.next=6,this.api.post(this.data.resourceUrl,Object.assign(Object.assign({},o),{password:c})).toPromise();case 6:n=e.sent,e.next=13;break;case 9:return a="".concat(this.data.resourceUrl,"/").concat(r),e.next=12,this.api.put(a,t).toPromise();case 12:n=e.sent;case 13:this.dialogRef.close(n);case 14:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||k)(l.Qb(s.e),l.Qb(b.a),l.Qb(f.a),l.Qb(a.e),l.Qb(a.a))},k.\u0275cmp=l.Kb({type:k,selectors:[["app-create-user-form"]],inputs:{error:"error"},decls:25,vars:8,consts:[["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Name","formControlName","name"],["type","text","matInput","","placeholder","User Name","formControlName","username"],[4,"ngIf"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"button"],["type","button","mat-button","",3,"disabled","click"],["type","submit","mat-button","",3,"disabled"],["type","password","matInput","","placeholder","Password","formControlName","password"],[3,"value"],[1,"error"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"mat-card"),l.Wb(2,"mat-card-title"),l.Kc(3),l.Vb(),l.Wb(4,"mat-card-content"),l.Wb(5,"form",1),l.ic("ngSubmit",(function(){return t.submit()})),l.Wb(6,"p"),l.Wb(7,"mat-form-field"),l.Rb(8,"input",2),l.Vb(),l.Vb(),l.Wb(9,"p"),l.Wb(10,"mat-form-field"),l.Rb(11,"input",3),l.Vb(),l.Vb(),l.Ic(12,V,3,0,"p",4),l.Wb(13,"p"),l.Wb(14,"mat-form-field"),l.Wb(15,"mat-label"),l.Kc(16,"Role"),l.Vb(),l.Wb(17,"mat-select",5),l.Ic(18,y,2,2,"mat-option",6),l.Vb(),l.Vb(),l.Vb(),l.Ic(19,W,2,1,"p",7),l.Wb(20,"div",8),l.Wb(21,"button",9),l.ic("click",(function(){return t.form.reset(t.initialValues)})),l.Kc(22,"Reset"),l.Vb(),l.Wb(23,"button",10),l.Kc(24),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Cb(3),l.Lc(t.isCreateMode?"Create User":"Update User"),l.Cb(2),l.rc("formGroup",t.form),l.Cb(7),l.rc("ngIf",t.isCreateMode),l.Cb(6),l.rc("ngForOf",t.keys),l.Cb(1),l.rc("ngIf",t.error),l.Cb(2),l.rc("disabled",!t.form.touched),l.Cb(2),l.rc("disabled",t.form.invalid),l.Cb(1),l.Lc(""==t.form.value._id?"Create":"Update"))},directives:[a.c,d.a,d.d,d.b,s.x,s.m,s.g,m.b,p.a,s.c,s.l,s.f,h.m,m.e,v.a,h.l,g.b,C.h],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.forgot-pass-link[_ngcontent-%COMP%]{align-self:center;padding:0 16px;text-decoration:underline;font-size:smaller;font-style:italic;line-height:36px}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:unset}"]}),k),K=n("3LUQ"),I=((w=function(){function e(t,n,i){_classCallCheck(this,e),this.api=t,this.alert=n,this.dialogRef=i}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onFileChange",value:function(e){this.selectedFile=e.target.files[0]}},{key:"uploadFile",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.selectedFile){e.next=13;break}return(t=new FormData).append("file",this.selectedFile),e.prev=3,e.next=6,this.api.post("/users/migrate-users",t).toPromise();case 6:this.alert.success("Users created successfully!"),this.dialogRef.close(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.alert.error(e.t0.error.message);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})))}}]),e}()).\u0275fac=function(e){return new(e||w)(l.Qb(b.a),l.Qb(K.a),l.Qb(a.e))},w.\u0275cmp=l.Kb({type:w,selectors:[["app-upload-users-csv-form"]],decls:6,vars:0,consts:[[1,"form-group"],["for","exampleFormControlFile1"],["type","file","accept",".csv","id","exampleFormControlFile1",1,"form-control-file",3,"change"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"label",1),l.Kc(2,"Select CSV"),l.Vb(),l.Wb(3,"input",2),l.ic("change",(function(e){return t.onFileChange(e)})),l.Vb(),l.Vb(),l.Wb(4,"button",3),l.ic("click",(function(){return t.uploadFile()})),l.Kc(5,"Create users"),l.Vb())},styles:[""]}),w),x=n("edFq"),R=n("NFeN"),M=n("JuEE");function _(e,t){1&e&&(l.Wb(0,"th",17),l.Kc(1," Name "),l.Vb())}function F(e,t){if(1&e&&(l.Wb(0,"td",18),l.Kc(1),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",n.name," ")}}function L(e,t){1&e&&(l.Wb(0,"th",17),l.Kc(1," Username "),l.Vb())}function S(e,t){if(1&e&&(l.Wb(0,"td",18),l.Kc(1),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",n.username," ")}}function N(e,t){1&e&&(l.Wb(0,"th",17),l.Kc(1," Role "),l.Vb())}function P(e,t){if(1&e&&(l.Wb(0,"td",18),l.Kc(1),l.nc(2,"role"),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",l.oc(2,1,n.role)," ")}}function U(e,t){1&e&&(l.Wb(0,"th",17),l.Kc(1," Created on "),l.Vb())}function q(e,t){if(1&e&&(l.Wb(0,"td",18),l.Kc(1),l.nc(2,"date"),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",l.oc(2,1,n.createdAt)," ")}}function A(e,t){1&e&&(l.Wb(0,"th",17),l.Kc(1," Update on "),l.Vb())}function Q(e,t){if(1&e&&(l.Wb(0,"td",18),l.Kc(1),l.nc(2,"date"),l.Vb()),2&e){var n=t.$implicit;l.Cb(1),l.Mc(" ",l.oc(2,1,n.updatedAt)," ")}}function D(e,t){1&e&&(l.Wb(0,"th",17),l.Wb(1,"div",19),l.Kc(2,"Actions"),l.Vb(),l.Vb())}function T(e,t){if(1&e){var n=l.Xb();l.Wb(0,"td",18),l.Wb(1,"div",20),l.Wb(2,"button",21),l.ic("click",(function(){l.Bc(n);var e=t.$implicit;return l.mc().onEdit(e)})),l.Kc(3,"Edit"),l.Vb(),l.Wb(4,"button",22),l.ic("click",(function(){l.Bc(n);var e=t.$implicit;return l.mc().onDelete(e)})),l.Kc(5,"Delete"),l.Vb(),l.Vb(),l.Vb()}}function j(e,t){1&e&&l.Rb(0,"tr",23)}function $(e,t){1&e&&l.Rb(0,"tr",24)}n.d(t,"a",(function(){return X}));var B,E=function(){return[5,10,20]},X=((B=function(){function e(t,n,i){_classCallCheck(this,e),this.resourceService=t,this.authService=n,this.dialog=i,this.resourceUrl="/users"}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resourceService.fetchAll(this.resourceUrl).toPromise();case 2:t=e.sent,this.displayedColumns=["name","userName","role","createdAt","updatedAt","action"],this.resetList(t.data);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"reFetchResourceList",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resourceService.fetchAll(this.resourceUrl).toPromise();case 2:t=e.sent,this.resetList(t.data);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resetList",value:function(e){var t=this.filterBasedOnRole(e);this.dataSource=new r.k(t),this.dataSource.paginator=this.paginator}},{key:"filterBasedOnRole",value:function(e){var t="SUPER_ADMIN"===this.authService.getLogginedUserRole()?{role:"ADMIN"}:function(e){return!("ADMIN"==e.role||"SUPER_ADMIN"==e.role)};return Object(o.filter)(e,t)}},{key:"getClassName",value:function(e){return console.log(this.classMap[e]),this.classMap.get(e)||"Class has been deleted"}},{key:"onUploadCSV",value:function(){var e=this;this.dialog.open(I,{width:"600px",data:{}}).afterClosed().subscribe((function(t){e.reFetchResourceList()}))}},{key:"openDialogue",value:function(e){var t=this;this.dialog.open(O,{width:"600px",data:{resourceUrl:this.resourceUrl,classList:this.classList,user:e}}).afterClosed().subscribe((function(e){t.reFetchResourceList()}))}},{key:"onAddResource",value:function(){this.openDialogue({_id:"",name:"",mobileNumber:"",class:"",isSubscribed:""})}},{key:"onUpdate",value:function(){this.reFetchResourceList()}},{key:"onDelete",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.resourceService.delete(this.resourceUrl,e).toPromise();case 2:this.reFetchResourceList();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onEdit",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.openDialogue(e);case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||B)(l.Qb(x.a),l.Qb(f.a),l.Qb(a.b))},B.\u0275cmp=l.Kb({type:B,selectors:[["app-users-page"]],viewQuery:function(e,t){var n;1&e&&l.Gc(c.a,!0),2&e&&l.yc(n=l.jc())&&(t.paginator=n.first)},inputs:{resourceUrl:"resourceUrl"},decls:35,vars:5,consts:[[1,"mat-elevation-z8"],[1,"resource-actions-panel"],[1,"table-heading"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",1,"ml10",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","role"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","action","sticky","true"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"ml20"],[1,"example-flex-container2"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"h3",2),l.Kc(3," Users "),l.Vb(),l.Wb(4,"div"),l.Wb(5,"button",3),l.ic("click",(function(){return t.onAddResource()})),l.Wb(6,"mat-icon"),l.Kc(7,"add"),l.Vb(),l.Kc(8," Add "),l.Vb(),l.Wb(9,"button",4),l.ic("click",(function(){return t.onUploadCSV()})),l.Wb(10,"mat-icon"),l.Kc(11,"publish"),l.Vb(),l.Kc(12," Upload CSV "),l.Vb(),l.Vb(),l.Vb(),l.Wb(13,"table",5),l.Ub(14,6),l.Ic(15,_,2,0,"th",7),l.Ic(16,F,2,1,"td",8),l.Tb(),l.Ub(17,9),l.Ic(18,L,2,0,"th",7),l.Ic(19,S,2,1,"td",8),l.Tb(),l.Ub(20,10),l.Ic(21,N,2,0,"th",7),l.Ic(22,P,3,3,"td",8),l.Tb(),l.Ub(23,11),l.Ic(24,U,2,0,"th",7),l.Ic(25,q,3,3,"td",8),l.Tb(),l.Ub(26,12),l.Ic(27,A,2,0,"th",7),l.Ic(28,Q,3,3,"td",8),l.Tb(),l.Ub(29,13),l.Ic(30,D,3,0,"th",7),l.Ic(31,T,6,0,"td",8),l.Tb(),l.Ic(32,j,1,0,"tr",14),l.Ic(33,$,1,0,"tr",15),l.Vb(),l.Rb(34,"mat-paginator",16),l.Vb()),2&e&&(l.Cb(13),l.rc("dataSource",t.dataSource),l.Cb(19),l.rc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.rc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.rc("pageSizeOptions",l.uc(4,E)))},directives:[g.b,R.a,r.j,r.c,r.e,r.b,r.g,r.i,c.a,r.d,r.a,r.f,r.h],pipes:[M.a,h.e],styles:["table[_ngcontent-%COMP%]{width:100%}.resource-actions-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 20px}.ml20[_ngcontent-%COMP%]{margin-left:20px}.ml10[_ngcontent-%COMP%]{margin-left:10px}"]}),B)},edFq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),r=n("H+bZ"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"fetchAll",value:function(e){return this.api.get(e)}},{key:"delete",value:function(e,t){return this.api.delete("".concat(e,"/").concat(t._id))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ec(r.a))},e.\u0275prov=i.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"k+vH":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("LvDl"),r=n("fXoL"),c=n("tyNb"),o=n("st1q"),a=n("ofXK"),s=n("Wp6s"),u=n("LPYB");function l(e,t){1&e&&(r.Ub(0),r.Kc(1,"Loading..."),r.Tb())}function b(e,t){if(1&e&&(r.Wb(0,"li",17),r.Kc(1),r.Vb()),2&e){var n=t.$implicit;r.Cb(1),r.Mc(" ",n," ")}}function f(e,t){if(1&e&&(r.Wb(0,"tr"),r.Wb(1,"th",18),r.Kc(2),r.Vb(),r.Wb(3,"td"),r.Kc(4),r.Vb(),r.Wb(5,"td"),r.Kc(6),r.Vb(),r.Wb(7,"td"),r.Kc(8),r.Vb(),r.Wb(9,"td"),r.Kc(10),r.Vb(),r.Wb(11,"td"),r.Kc(12),r.Vb(),r.Wb(13,"td"),r.Kc(14),r.Vb(),r.Vb()),2&e){var n=t.$implicit,i=t.index;r.Cb(2),r.Lc(i+1),r.Cb(2),r.Lc(n.answer),r.Cb(2),r.Lc(n.name),r.Cb(2),r.Lc(n.mobileNumber),r.Cb(2),r.Lc(n.destrict),r.Cb(2),r.Lc(n.vidhanSabha),r.Cb(2),r.Lc(n.comment)}}function d(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"mat-card",3),r.Wb(4,"div",4),r.Kc(5),r.Vb(),r.Wb(6,"ol",5),r.Ic(7,b,2,1,"li",6),r.Vb(),r.Vb(),r.Vb(),r.Wb(8,"div",7),r.Wb(9,"mat-card",8),r.Wb(10,"div",9),r.Rb(11,"canvas",10),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",11),r.Wb(13,"div",12),r.Wb(14,"mat-card"),r.Wb(15,"div",13),r.Wb(16,"table",14),r.Wb(17,"thead"),r.Wb(18,"tr"),r.Wb(19,"th",15),r.Kc(20,"#"),r.Vb(),r.Wb(21,"th",15),r.Kc(22,"Answer"),r.Vb(),r.Wb(23,"th",15),r.Kc(24,"Name"),r.Vb(),r.Wb(25,"th",15),r.Kc(26,"Mobile Number"),r.Vb(),r.Wb(27,"th",15),r.Kc(28,"District"),r.Vb(),r.Wb(29,"th",15),r.Kc(30,"Vidhan Sabha"),r.Vb(),r.Wb(31,"th",15),r.Kc(32,"Comment"),r.Vb(),r.Vb(),r.Vb(),r.Wb(33,"tbody"),r.Ic(34,f,15,7,"tr",16),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()),2&e){var n=r.mc();r.Cb(5),r.Lc(n.question.title),r.Cb(2),r.rc("ngForOf",n.question.options),r.Cb(4),r.rc("datasets",n.barChartData)("labels",n.labels)("chartType",n.barChartType)("options",n.barChartOptions),r.Cb(23),r.rc("ngForOf",n.answers)}}var m=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.route=t,this.suggestionService=n,this.barChartOptions={responsive:!0,title:{text:"Options selected!"}},this.barChartLabels=["Answers"],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[],this.loading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.questionId=t.get("questionId")})),this.suggestionService.getQuestionWithAnswer(this.questionId).subscribe((function(t){var n=t.data;e.question=n.question,e.answers=n.answers;var r=Object(i.countBy)(e.answers,"answer");e.barChartData=[{data:e.question.options.map((function(e){return r[e]||0})),label:"Number of Answers"}],e.labels=e.question.options,e.loading=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Qb(c.a),r.Qb(o.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-answers"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-12","col-lg-4","question"],[2,"min-height","250px"],[2,"margin-bottom","10px","font-size","16px"],[2,"margin-left","-20px","font-size","16px"],["style","margin-top: 5px;",4,"ngFor","ngForOf"],[1,"col-md-12","col-lg-8","graph"],[2,"min-height","200px","display","flex","justify-content","center"],[2,"width","500px"],["baseChart","",3,"datasets","labels","chartType","options"],[1,"row","question-table"],[1,"col-md-12"],[2,"display","block"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[2,"margin-top","5px"],["scope","row"]],template:function(e,t){1&e&&(r.Ic(0,l,2,0,"ng-container",0),r.Ic(1,d,35,7,"ng-container",0)),2&e&&(r.rc("ngIf",t.loading),r.Cb(1),r.rc("ngIf",!t.loading))},directives:[a.m,s.a,a.l,u.a],styles:["@media only screen and (min-width:1200px){.question[_ngcontent-%COMP%]{margin-right:0;padding-right:0}}@media only screen and (max-width:1200px){.graph[_ngcontent-%COMP%]{margin-top:10px}}.question-table[_ngcontent-%COMP%]{margin-top:10px}@media only screen and (min-width:1200px){.question-table[_ngcontent-%COMP%]{margin-top:50px}}"]}),e}()},vQ30:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),r=n("N/25"),c=n("MutI"),o=n("ofXK"),a=n("NFeN"),s=n("tyNb");function u(e,t){if(1&e&&(i.Wb(0,"a",3),i.Wb(1,"mat-icon",4),i.Kc(2),i.Vb(),i.Kc(3),i.Vb()),2&e){var n=t.$implicit;i.rc("routerLink",n.link),i.Cb(2),i.Lc(n.icon),i.Cb(1),i.Mc("\xa0",n.title," ")}}var l=function(){var e=function(){function e(t){_classCallCheck(this,e),this.authService=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onLogout",value:function(){this.authService.logout()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Qb(r.a))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-side-menu"]],inputs:{menuList:"menuList"},decls:6,vars:1,consts:[["mat-list-item","","class","menu-item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",1,"menu-item",3,"click"],["aria-hidden","false","aria-label","Example home icon"],["mat-list-item","","routerLinkActive","active",1,"menu-item",3,"routerLink"],["aria-hidden","false","aria-label","Example thumbs up SVG icon"]],template:function(e,t){1&e&&(i.Wb(0,"mat-nav-list"),i.Ic(1,u,4,3,"a",0),i.Wb(2,"a",1),i.ic("click",(function(){return t.onLogout()})),i.Wb(3,"mat-icon",2),i.Kc(4,"power_settings_new"),i.Vb(),i.Kc(5,"\xa0Logout "),i.Vb(),i.Vb()),2&e&&(i.Cb(1),i.rc("ngForOf",t.menuList))},directives:[c.c,o.l,c.a,a.a,s.f,s.e],styles:[".menu-item[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}a.active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.08);color:rgba(0,0,0,.7)}"]}),e}()}}]);