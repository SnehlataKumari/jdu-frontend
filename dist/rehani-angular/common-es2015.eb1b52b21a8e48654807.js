(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{JuEE:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("U7T7"),c=i("fXoL");let o=(()=>{class t{transform(t,...e){return n.c[t].label||"Unkown Role"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Pb({name:"role",type:t,pure:!0}),t})()},"S/Mv":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("fXoL"),c=i("ofXK");function o(t,e){if(1&t&&(n.Wb(0,"span",2),n.Kc(1),n.Vb()),2&t){const t=n.mc();n.Cb(1),n.Mc(" ",t.label,"\n")}}function r(t,e){if(1&t&&(n.Ub(0),n.Kc(1),n.Tb()),2&t){const t=n.mc();n.Cb(1),n.Mc(" ",t.label,"\n")}}let a=(()=>{class t{constructor(){this.isBadge=!0}ngOnInit(){this.label=this.constant[this.code].label}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Kb({type:t,selectors:[["app-constant"]],inputs:{constant:"constant",code:"code",isBadge:"isBadge"},decls:2,vars:2,consts:[["class","badge badge-secondary",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-secondary"]],template:function(t,e){1&t&&(n.Ic(0,o,2,1,"span",0),n.Ic(1,r,2,1,"ng-container",1)),2&t&&(n.rc("ngIf",e.isBadge),n.Cb(1),n.rc("ngIf",!e.isBadge))},directives:[c.m],styles:[""]}),t})()},TqWN:function(t,e,i){"use strict";var n=i("mrSG"),c=i("+0xr"),o=i("M9IT"),r=i("LvDl"),a=i("0IaG"),s=i("3Pt+"),l=i("U7T7"),b=i("fXoL"),u=i("H+bZ"),d=i("N/25"),m=i("Wp6s"),f=i("kmnG"),p=i("qFsG"),h=i("ofXK"),g=i("d3UM"),v=i("bTqV"),C=i("FKr1");function V(t,e){1&t&&(b.Wb(0,"p"),b.Wb(1,"mat-form-field"),b.Rb(2,"input",11),b.Vb(),b.Vb())}function W(t,e){if(1&t&&(b.Wb(0,"mat-option",12),b.Kc(1),b.Vb()),2&t){const t=e.$implicit,i=b.mc();b.rc("value",t),b.Cb(1),b.Mc(" ",i.displayRoles[t].label," ")}}function w(t,e){if(1&t&&(b.Wb(0,"p",13),b.Kc(1),b.Vb()),2&t){const t=b.mc();b.Cb(1),b.Mc(" ",t.error," ")}}let I=(()=>{class t{constructor(t,e,i,n,c){this.fb=t,this.api=e,this.authService=i,this.dialogRef=n,this.data=c,this.isCreateMode=!0,console.log(c.classList)}onNoClick(){this.dialogRef.close()}ngOnInit(){this.initialValues=this.data.user,this.isCreateMode=""===this.initialValues._id;const t=this.authService.getLogginedUserRole();this.displayRoles="SUPER_ADMIN"===t?Object(r.pick)(l.c,["ADMIN"]):Object(r.pick)(l.c,Object(r.filter)(Reflect.ownKeys(l.c),t=>!("ADMIN"===t||"SUPER_ADMIN"===t))),this.keys=Reflect.ownKeys(this.displayRoles),this.form=this.fb.group({_id:[this.initialValues._id],name:[this.initialValues.name,s.v.required],role:[this.initialValues.role||Reflect.ownKeys(this.displayRoles)[0],s.v.required],username:[this.initialValues.username,s.v.required],password:[this.initialValues.password,s.v.required]})}submit(){return Object(n.a)(this,void 0,void 0,(function*(){if(this.form.valid){const t=this.form.value;let e;const{_id:i,password:c}=t,o=Object(n.b)(t,["_id","password"]);if(""==t._id)e=yield this.api.post(this.data.resourceUrl,Object.assign(Object.assign({},o),{password:c})).toPromise();else{const n=`${this.data.resourceUrl}/${i}`;e=yield this.api.put(n,t).toPromise()}this.dialogRef.close(e)}}))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(s.e),b.Qb(u.a),b.Qb(d.a),b.Qb(a.e),b.Qb(a.a))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-create-user-form"]],inputs:{error:"error"},decls:25,vars:8,consts:[["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Name","formControlName","name"],["type","text","matInput","","placeholder","User Name","formControlName","username"],[4,"ngIf"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"button"],["type","button","mat-button","",3,"disabled","click"],["type","submit","mat-button","",3,"disabled"],["type","password","matInput","","placeholder","Password","formControlName","password"],[3,"value"],[1,"error"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"mat-card"),b.Wb(2,"mat-card-title"),b.Kc(3),b.Vb(),b.Wb(4,"mat-card-content"),b.Wb(5,"form",1),b.ic("ngSubmit",(function(){return e.submit()})),b.Wb(6,"p"),b.Wb(7,"mat-form-field"),b.Rb(8,"input",2),b.Vb(),b.Vb(),b.Wb(9,"p"),b.Wb(10,"mat-form-field"),b.Rb(11,"input",3),b.Vb(),b.Vb(),b.Ic(12,V,3,0,"p",4),b.Wb(13,"p"),b.Wb(14,"mat-form-field"),b.Wb(15,"mat-label"),b.Kc(16,"Role"),b.Vb(),b.Wb(17,"mat-select",5),b.Ic(18,W,2,2,"mat-option",6),b.Vb(),b.Vb(),b.Vb(),b.Ic(19,w,2,1,"p",7),b.Wb(20,"div",8),b.Wb(21,"button",9),b.ic("click",(function(){return e.form.reset(e.initialValues)})),b.Kc(22,"Reset"),b.Vb(),b.Wb(23,"button",10),b.Kc(24),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Cb(3),b.Lc(e.isCreateMode?"Create User":"Update User"),b.Cb(2),b.rc("formGroup",e.form),b.Cb(7),b.rc("ngIf",e.isCreateMode),b.Cb(6),b.rc("ngForOf",e.keys),b.Cb(1),b.rc("ngIf",e.error),b.Cb(2),b.rc("disabled",!e.form.touched),b.Cb(2),b.rc("disabled",e.form.invalid),b.Cb(1),b.Lc(""==e.form.value._id?"Create":"Update"))},directives:[a.c,m.a,m.d,m.b,s.x,s.m,s.g,f.b,p.a,s.c,s.l,s.f,h.m,f.e,g.a,h.l,v.a,C.h],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.forgot-pass-link[_ngcontent-%COMP%]{align-self:center;padding:0 16px;text-decoration:underline;font-size:smaller;font-style:italic;line-height:36px}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:unset}"]}),t})();var y=i("edFq"),R=i("NFeN"),M=i("JuEE");function K(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Name "),b.Vb())}function U(t,e){if(1&t&&(b.Wb(0,"td",17),b.Kc(1),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.Mc(" ",t.name," ")}}function O(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Username "),b.Vb())}function L(t,e){if(1&t&&(b.Wb(0,"td",17),b.Kc(1),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.Mc(" ",t.username," ")}}function k(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Role "),b.Vb())}function D(t,e){if(1&t&&(b.Wb(0,"td",17),b.Kc(1),b.nc(2,"role"),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.Mc(" ",b.oc(2,1,t.role)," ")}}function N(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Created on "),b.Vb())}function S(t,e){if(1&t&&(b.Wb(0,"td",17),b.Kc(1),b.nc(2,"date"),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.Mc(" ",b.oc(2,1,t.createdAt)," ")}}function x(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Update on "),b.Vb())}function A(t,e){if(1&t&&(b.Wb(0,"td",17),b.Kc(1),b.nc(2,"date"),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.Mc(" ",b.oc(2,1,t.updatedAt)," ")}}function _(t,e){1&t&&(b.Wb(0,"th",16),b.Kc(1," Actions "),b.Vb())}function P(t,e){if(1&t){const t=b.Xb();b.Wb(0,"td",17),b.Wb(1,"div",18),b.Wb(2,"button",19),b.ic("click",(function(){b.Bc(t);const i=e.$implicit;return b.mc().onEdit(i)})),b.Wb(3,"mat-icon"),b.Kc(4,"create"),b.Vb(),b.Vb(),b.Wb(5,"button",20),b.ic("click",(function(){b.Bc(t);const i=e.$implicit;return b.mc().onDelete(i)})),b.Wb(6,"mat-icon"),b.Kc(7,"delete"),b.Vb(),b.Vb(),b.Vb(),b.Vb()}}function F(t,e){1&t&&b.Rb(0,"tr",21)}function j(t,e){1&t&&b.Rb(0,"tr",22)}i.d(e,"a",(function(){return $}));const E=function(){return[5,10,20]};let $=(()=>{class t{constructor(t,e,i){this.resourceService=t,this.authService=e,this.dialog=i,this.resourceUrl="/users"}ngOnInit(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.resourceService.fetchAll(this.resourceUrl).toPromise();this.displayedColumns=["name","userName","role","createdAt","updatedAt","action"],this.resetList(t.data)}))}reFetchResourceList(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.resourceService.fetchAll(this.resourceUrl).toPromise();this.resetList(t.data)}))}resetList(t){const e=this.filterBasedOnRole(t);this.dataSource=new c.k(e),this.dataSource.paginator=this.paginator}filterBasedOnRole(t){const e="SUPER_ADMIN"===this.authService.getLogginedUserRole()?{role:"ADMIN"}:t=>!("ADMIN"==t.role||"SUPER_ADMIN"==t.role);return Object(r.filter)(t,e)}getClassName(t){return console.log(this.classMap[t]),this.classMap.get(t)||"Class has been deleted"}openDialogue(t){this.dialog.open(I,{width:"600px",data:{resourceUrl:this.resourceUrl,classList:this.classList,user:t}}).afterClosed().subscribe(t=>{this.reFetchResourceList()})}onAddResource(){this.openDialogue({_id:"",name:"",mobileNumber:"",class:"",isSubscribed:""})}onUpdate(){this.reFetchResourceList()}onDelete(t){return Object(n.a)(this,void 0,void 0,(function*(){yield this.resourceService.delete(this.resourceUrl,t).toPromise(),this.reFetchResourceList()}))}onEdit(t){return Object(n.a)(this,void 0,void 0,(function*(){this.openDialogue(t)}))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(y.a),b.Qb(d.a),b.Qb(a.b))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-users-page"]],viewQuery:function(t,e){var i;1&t&&b.Gc(o.a,!0),2&t&&b.yc(i=b.jc())&&(e.paginator=i.first)},inputs:{resourceUrl:"resourceUrl"},decls:29,vars:5,consts:[[1,"mat-elevation-z8"],[1,"resource-actions-panel"],[1,"table-heading"],["mat-icon-button","","color","warn","mat-mini-fab","","aria-label","Example icon button with a home icon",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","role"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","action","sticky","true"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"example-flex-container2"],["mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon",3,"click"],["mat-icon-button","","color","warn","aria-label","Example icon button with a home icon",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"h3",2),b.Kc(3," Users "),b.Vb(),b.Wb(4,"button",3),b.ic("click",(function(){return e.onAddResource()})),b.Wb(5,"mat-icon"),b.Kc(6,"add"),b.Vb(),b.Vb(),b.Vb(),b.Wb(7,"table",4),b.Ub(8,5),b.Ic(9,K,2,0,"th",6),b.Ic(10,U,2,1,"td",7),b.Tb(),b.Ub(11,8),b.Ic(12,O,2,0,"th",6),b.Ic(13,L,2,1,"td",7),b.Tb(),b.Ub(14,9),b.Ic(15,k,2,0,"th",6),b.Ic(16,D,3,3,"td",7),b.Tb(),b.Ub(17,10),b.Ic(18,N,2,0,"th",6),b.Ic(19,S,3,3,"td",7),b.Tb(),b.Ub(20,11),b.Ic(21,x,2,0,"th",6),b.Ic(22,A,3,3,"td",7),b.Tb(),b.Ub(23,12),b.Ic(24,_,2,0,"th",6),b.Ic(25,P,8,0,"td",7),b.Tb(),b.Ic(26,F,1,0,"tr",13),b.Ic(27,j,1,0,"tr",14),b.Vb(),b.Rb(28,"mat-paginator",15),b.Vb()),2&t&&(b.Cb(7),b.rc("dataSource",e.dataSource),b.Cb(19),b.rc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.rc("matRowDefColumns",e.displayedColumns),b.Cb(1),b.rc("pageSizeOptions",b.uc(4,E)))},directives:[v.a,R.a,c.j,c.c,c.e,c.b,c.g,c.i,o.a,c.d,c.a,c.f,c.h],pipes:[M.a,h.e],styles:["table[_ngcontent-%COMP%]{width:100%}.resource-actions-panel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 20px}"]}),t})()},edFq:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL"),c=i("H+bZ");let o=(()=>{class t{constructor(t){this.api=t}fetchAll(t){return this.api.get(t)}delete(t,e){return this.api.delete(`${t}/${e._id}`)}}return t.\u0275fac=function(e){return new(e||t)(n.ec(c.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vQ30:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("fXoL"),c=i("MutI"),o=i("ofXK"),r=i("tyNb"),a=i("NFeN");function s(t,e){if(1&t&&(n.Wb(0,"a",1),n.Wb(1,"mat-icon",2),n.Kc(2),n.Vb(),n.Kc(3),n.Vb()),2&t){const t=e.$implicit;n.rc("routerLink",t.link),n.Cb(2),n.Lc(t.icon),n.Cb(1),n.Mc(" ",t.title," ")}}let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Kb({type:t,selectors:[["app-side-menu"]],inputs:{menuList:"menuList"},decls:2,vars:1,consts:[["mat-list-item","","class","menu-item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","","routerLinkActive","active",1,"menu-item",3,"routerLink"],["aria-hidden","false","aria-label","Example thumbs up SVG icon"]],template:function(t,e){1&t&&(n.Wb(0,"mat-nav-list"),n.Ic(1,s,4,3,"a",0),n.Vb()),2&t&&(n.Cb(1),n.rc("ngForOf",e.menuList))},directives:[c.c,o.l,c.a,r.d,r.c,a.a],styles:[".menu-item[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}a.active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.08);color:rgba(0,0,0,.7)}"]}),t})()}}]);